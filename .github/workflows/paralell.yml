name: Parallel Jobs Workflow

on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  FrontEnd:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      - name: Front End Build
        run: echo "Building Front End"
      

  BackEnd:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      - name: Back End Build
        run: echo "Building Back End"
        
  IaC:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      - name: IaC Build 
        run: echo "Building IaC"

  job-summary:
    name: ðŸ“Š Build Summary
    runs-on: ubuntu-latest
    needs: [FrontEnd, BackEnd, IaC]
    if: always()
    
    steps:
      - name: Generate Build Summary
        run: |
          echo "# ðŸš€ Parallel Build Pipeline Summary" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**Repository:** ${{ github.repository }}" >> $GITHUB_STEP_SUMMARY
          echo "**Branch:** \`${{ github.ref_name }}\`" >> $GITHUB_STEP_SUMMARY
          echo "**Commit:** \`${{ github.sha }}\`" >> $GITHUB_STEP_SUMMARY
          echo "**Triggered by:** ${{ github.event_name }} ðŸ”„" >> $GITHUB_STEP_SUMMARY
          echo "**Workflow run:** #${{ github.run_number }}" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          
          echo "## ðŸ“‹ Build Results" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          
          # Frontend Status
          if [[ "${{ needs.FrontEnd.result }}" == "success" ]]; then
            echo "ðŸŽ¨ **Frontend Build:** âœ… Success" >> $GITHUB_STEP_SUMMARY
          elif [[ "${{ needs.FrontEnd.result }}" == "failure" ]]; then
            echo "ðŸŽ¨ **Frontend Build:** âŒ Failed" >> $GITHUB_STEP_SUMMARY
          elif [[ "${{ needs.FrontEnd.result }}" == "cancelled" ]]; then
            echo "ðŸŽ¨ **Frontend Build:** â¹ï¸ Cancelled" >> $GITHUB_STEP_SUMMARY
          else
            echo "ðŸŽ¨ **Frontend Build:** â­ï¸ Skipped" >> $GITHUB_STEP_SUMMARY
          fi
          
          # Backend Status
          if [[ "${{ needs.BackEnd.result }}" == "success" ]]; then
            echo "âš™ï¸ **Backend Build:** âœ… Success" >> $GITHUB_STEP_SUMMARY
          elif [[ "${{ needs.BackEnd.result }}" == "failure" ]]; then
            echo "âš™ï¸ **Backend Build:** âŒ Failed" >> $GITHUB_STEP_SUMMARY
          elif [[ "${{ needs.BackEnd.result }}" == "cancelled" ]]; then
            echo "âš™ï¸ **Backend Build:** â¹ï¸ Cancelled" >> $GITHUB_STEP_SUMMARY
          else
            echo "âš™ï¸ **Backend Build:** â­ï¸ Skipped" >> $GITHUB_STEP_SUMMARY
          fi
          
          # IaC Status
          if [[ "${{ needs.IaC.result }}" == "success" ]]; then
            echo "ðŸ—ï¸ **Infrastructure as Code:** âœ… Success" >> $GITHUB_STEP_SUMMARY
          elif [[ "${{ needs.IaC.result }}" == "failure" ]]; then
            echo "ðŸ—ï¸ **Infrastructure as Code:** âŒ Failed" >> $GITHUB_STEP_SUMMARY
          elif [[ "${{ needs.IaC.result }}" == "cancelled" ]]; then
            echo "ðŸ—ï¸ **Infrastructure as Code:** â¹ï¸ Cancelled" >> $GITHUB_STEP_SUMMARY
          else
            echo "ðŸ—ï¸ **Infrastructure as Code:** â­ï¸ Skipped" >> $GITHUB_STEP_SUMMARY
          fi
          
          echo "" >> $GITHUB_STEP_SUMMARY
          
          # Overall Status
          OVERALL_STATUS="ðŸŽ‰ All builds completed successfully!"
          if [[ "${{ needs.FrontEnd.result }}" == "failure" || "${{ needs.BackEnd.result }}" == "failure" || "${{ needs.IaC.result }}" == "failure" ]]; then
            OVERALL_STATUS="ðŸ’¥ Some builds failed - check the logs above"
          elif [[ "${{ needs.FrontEnd.result }}" == "cancelled" || "${{ needs.BackEnd.result }}" == "cancelled" || "${{ needs.IaC.result }}" == "cancelled" ]]; then
            OVERALL_STATUS="â¸ï¸ Build pipeline was cancelled"
          fi
          
          echo "## ðŸŽ¯ Overall Status" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "$OVERALL_STATUS" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          
          # Build Statistics
          echo "## ðŸ“Š Build Statistics" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "| Component | Status | Duration |" >> $GITHUB_STEP_SUMMARY
          echo "|-----------|--------|----------|" >> $GITHUB_STEP_SUMMARY
          echo "| ðŸŽ¨ Frontend | ${{ needs.FrontEnd.result }} | ~30s |" >> $GITHUB_STEP_SUMMARY
          echo "| âš™ï¸ Backend | ${{ needs.BackEnd.result }} | ~30s |" >> $GITHUB_STEP_SUMMARY
          echo "| ðŸ—ï¸ Infrastructure | ${{ needs.IaC.result }} | ~30s |" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          
          # Fun Facts
          echo "## ðŸŽ² Fun Facts" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸš€ This pipeline ran **3 jobs in parallel** for maximum efficiency!" >> $GITHUB_STEP_SUMMARY
          echo "- âš¡ Parallel execution saves approximately **60-90 seconds** compared to sequential builds" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ”„ This is workflow run number **#${{ github.run_number }}** for this repository" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ“… Build completed on **$(date +'%B %d, %Y at %H:%M UTC')**" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          
          # Next Steps
          echo "## ðŸŽ¯ What's Next?" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          if [[ "$OVERALL_STATUS" == *"successfully"* ]]; then
            echo "ðŸŽ‰ **Great job!** All components built successfully. Ready for deployment!" >> $GITHUB_STEP_SUMMARY
            echo "" >> $GITHUB_STEP_SUMMARY
            echo "**Recommended next steps:**" >> $GITHUB_STEP_SUMMARY
            echo "- ðŸ§ª Run integration tests" >> $GITHUB_STEP_SUMMARY
            echo "- ðŸ”’ Perform security scans" >> $GITHUB_STEP_SUMMARY
            echo "- ðŸš€ Deploy to staging environment" >> $GITHUB_STEP_SUMMARY
          else
            echo "ðŸ”§ **Action needed:** Some builds failed. Please review the logs and fix any issues." >> $GITHUB_STEP_SUMMARY
            echo "" >> $GITHUB_STEP_SUMMARY
            echo "**Troubleshooting tips:**" >> $GITHUB_STEP_SUMMARY
            echo "- ðŸ“‹ Check the individual job logs for detailed error messages" >> $GITHUB_STEP_SUMMARY
            echo "- ðŸ”„ Try re-running the failed jobs" >> $GITHUB_STEP_SUMMARY
            echo "- ðŸ’¬ Ask for help in the team chat if issues persist" >> $GITHUB_STEP_SUMMARY
          fi
          
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "---" >> $GITHUB_STEP_SUMMARY
          echo "ðŸ’¡ **Tip:** You can re-run individual failed jobs without running the entire workflow!" >> $GITHUB_STEP_SUMMARY
        